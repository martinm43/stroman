\hypertarget{namespacefull__ratings__calculations}{}\section{full\+\_\+ratings\+\_\+calculations Namespace Reference}
\label{namespacefull__ratings__calculations}\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
float {\bfseries pythag\+\_\+factor} = 1.\+83\hypertarget{namespacefull__ratings__calculations_a39ba6d50f8e6e562fb1a2fa2ca375f58}{}\label{namespacefull__ratings__calculations_a39ba6d50f8e6e562fb1a2fa2ca375f58}

\item 
{\bfseries wkdir} = os.\+path.\+join(os.\+path.\+dirname(\+\_\+\+\_\+file\+\_\+\+\_\+))\hypertarget{namespacefull__ratings__calculations_ac96f2c2bb04da9812f110cc76dd60531}{}\label{namespacefull__ratings__calculations_ac96f2c2bb04da9812f110cc76dd60531}

\item 
{\bfseries analysis\+\_\+start\+\_\+date}
\item 
{\bfseries analysis\+\_\+end\+\_\+date} = datetime.\+now()\hypertarget{namespacefull__ratings__calculations_a6a513ee89411a8bf6ef8e7c8340ac6e6}{}\label{namespacefull__ratings__calculations_a6a513ee89411a8bf6ef8e7c8340ac6e6}

\item 
float {\bfseries max\+\_\+\+M\+OV} = 100.\+0\hypertarget{namespacefull__ratings__calculations_ac371015f1925cbaeb2a9b2fd3ceb2601}{}\label{namespacefull__ratings__calculations_ac371015f1925cbaeb2a9b2fd3ceb2601}

\item 
float {\bfseries home\+\_\+team\+\_\+adv} = 0.\+0\hypertarget{namespacefull__ratings__calculations_a640672e2eaa8f30e85a5127ad2db7432}{}\label{namespacefull__ratings__calculations_a640672e2eaa8f30e85a5127ad2db7432}

\item 
\hyperlink{namespacefull__ratings__calculations_ad7fbe206580dbeabe107c6ac5b3fe020}{games}
\begin{DoxyCompactList}\small\item\em D\+A\+TA S\+E\+L\+E\+C\+T\+I\+ON \#. \end{DoxyCompactList}\item 
list \hyperlink{namespacefull__ratings__calculations_aa4a596206d6d9542a6b4bc0a737dfd6a}{analytics\+\_\+headers}
\begin{DoxyCompactList}\small\item\em A\+N\+A\+L\+Y\+T\+I\+CS \#. \end{DoxyCompactList}\item 
{\bfseries diff\+\_\+matrix} = np.\+zeros((30, 12))\hypertarget{namespacefull__ratings__calculations_a305724d5cbc0781e313f580e8480a743}{}\label{namespacefull__ratings__calculations_a305724d5cbc0781e313f580e8480a743}

\item 
list {\bfseries burke\+\_\+data} = \mbox{[}\mbox{[}g\mbox{[}2\mbox{]}, g\mbox{[}0\mbox{]}, g\mbox{[}3\mbox{]}, g\mbox{[}1\mbox{]}\mbox{]} for g in \hyperlink{namespacefull__ratings__calculations_ad7fbe206580dbeabe107c6ac5b3fe020}{games}\mbox{]}\hypertarget{namespacefull__ratings__calculations_a91ffb2063b7d59461eb7e62c00f51ea4}{}\label{namespacefull__ratings__calculations_a91ffb2063b7d59461eb7e62c00f51ea4}

\item 
{\bfseries Burke\+List}
\item 
{\bfseries diff\+\_\+list} = diff\+\_\+matrix.\+tolist()\hypertarget{namespacefull__ratings__calculations_a53c30fef438d9843924f6cc6d66ad79f}{}\label{namespacefull__ratings__calculations_a53c30fef438d9843924f6cc6d66ad79f}

\item 
list {\bfseries ratings\+\_\+list} = \mbox{[}$\,$\mbox{]}\hypertarget{namespacefull__ratings__calculations_a6151dea69e4d1a260c498ffd2f07e4d7}{}\label{namespacefull__ratings__calculations_a6151dea69e4d1a260c498ffd2f07e4d7}

\item 
{\bfseries team\+\_\+name\+\_\+data} = id\+\_\+to\+\_\+mlbgames\+\_\+name(i + 1, verbose=True)\hypertarget{namespacefull__ratings__calculations_a09be28a069e7e9a77064b0b56acadc80}{}\label{namespacefull__ratings__calculations_a09be28a069e7e9a77064b0b56acadc80}

\item 
{\bfseries x\+\_\+team\+\_\+name} = team\+\_\+name\+\_\+data\mbox{[}0\mbox{]}\hypertarget{namespacefull__ratings__calculations_a967f4f2df3d3fe2486f33acedaa7c7f1}{}\label{namespacefull__ratings__calculations_a967f4f2df3d3fe2486f33acedaa7c7f1}

\item 
{\bfseries x\+\_\+team\+\_\+division} = team\+\_\+name\+\_\+data\mbox{[}1\mbox{]}\hypertarget{namespacefull__ratings__calculations_a0e8f3f84eb55ece9679b422c8113f90e}{}\label{namespacefull__ratings__calculations_a0e8f3f84eb55ece9679b422c8113f90e}

\item 
{\bfseries key}\hypertarget{namespacefull__ratings__calculations_af388e6bff85ea3ffe17d9506e160f64f}{}\label{namespacefull__ratings__calculations_af388e6bff85ea3ffe17d9506e160f64f}

\item 
list {\bfseries vector\+\_\+of\+\_\+means} = \mbox{[}\mbox{[}x\mbox{[}\textquotesingle{}Avg. Run Delta\textquotesingle{}\mbox{]}\mbox{]} for x in ratings\+\_\+list\mbox{]}\hypertarget{namespacefull__ratings__calculations_a0556c829610c539b7023ab48e509bd12}{}\label{namespacefull__ratings__calculations_a0556c829610c539b7023ab48e509bd12}

\item 
list \hyperlink{namespacefull__ratings__calculations_aea6fcad67a2966594f87438dc1f03bf7}{table\+\_\+list}
\begin{DoxyCompactList}\small\item\em Writing the table to screen \#. \end{DoxyCompactList}\item 
{\bfseries ratings\+\_\+table}
\item 
\hyperlink{namespacefull__ratings__calculations_ad222c702d72dea5e00727f1bcab409e5}{file\+\_\+out}
\begin{DoxyCompactList}\small\item\em Print to Log File \#. \end{DoxyCompactList}\item 
list \hyperlink{namespacefull__ratings__calculations_a3a94f1d9d2af1e1c5501e0179768384d}{database\+\_\+ratings}
\begin{DoxyCompactList}\small\item\em Writing Ratings to Database \#. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
\begin{DoxyVerb}Full_Ratings_Calculations

This script calculates the run differentials, pythagorean win expectations,
and Burke ratings for MLB teams over a given time period with a given
maximum/minimum margin of victory and average home team advantage for use in the projections
scripts.

LINTED minus variable names.\end{DoxyVerb}
 

\subsection{Variable Documentation}
\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!analysis\+\_\+start\+\_\+date@{analysis\+\_\+start\+\_\+date}}
\index{analysis\+\_\+start\+\_\+date@{analysis\+\_\+start\+\_\+date}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{analysis\+\_\+start\+\_\+date}{analysis_start_date}}]{\setlength{\rightskip}{0pt plus 5cm}full\+\_\+ratings\+\_\+calculations.\+analysis\+\_\+start\+\_\+date}\hypertarget{namespacefull__ratings__calculations_ab9c01834b97bd729358e411c51784d9c}{}\label{namespacefull__ratings__calculations_ab9c01834b97bd729358e411c51784d9c}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = datetime.strptime(
2     \textcolor{stringliteral}{'2018-03-29'}, \textcolor{stringliteral}{'%Y-%m-%d'})
\end{DoxyCode}
\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!analytics\+\_\+headers@{analytics\+\_\+headers}}
\index{analytics\+\_\+headers@{analytics\+\_\+headers}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{analytics\+\_\+headers}{analytics_headers}}]{\setlength{\rightskip}{0pt plus 5cm}list full\+\_\+ratings\+\_\+calculations.\+analytics\+\_\+headers}\hypertarget{namespacefull__ratings__calculations_aa4a596206d6d9542a6b4bc0a737dfd6a}{}\label{namespacefull__ratings__calculations_aa4a596206d6d9542a6b4bc0a737dfd6a}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [
2     \textcolor{stringliteral}{"Wins"},
3     \textcolor{stringliteral}{"Losses"},
4     \textcolor{stringliteral}{"Runs Scored"},
5     \textcolor{stringliteral}{"Runs Allowed"},
6     \textcolor{stringliteral}{"Games Scheduled"},
7     \textcolor{stringliteral}{"Avg. Runs Scored"},
8     \textcolor{stringliteral}{"Avg. Runs Allowed"},
9     \textcolor{stringliteral}{"Avg. Run Delta"},
10     \textcolor{stringliteral}{"Run Delta"},
11     \textcolor{stringliteral}{"Pythag. Wins"},
12     \textcolor{stringliteral}{"Adj. Rtg."},
13     \textcolor{stringliteral}{"Win Pct."}]
\end{DoxyCode}


A\+N\+A\+L\+Y\+T\+I\+CS \#. 

\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!Burke\+List@{Burke\+List}}
\index{Burke\+List@{Burke\+List}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{Burke\+List}{BurkeList}}]{\setlength{\rightskip}{0pt plus 5cm}list full\+\_\+ratings\+\_\+calculations.\+Burke\+List}\hypertarget{namespacefull__ratings__calculations_a55aa8d60dd5ce6735ffb47aa65a02b55}{}\label{namespacefull__ratings__calculations_a55aa8d60dd5ce6735ffb47aa65a02b55}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = burke\_calc(
2     burke\_data,
3     impmode=\textcolor{keywordtype}{None},
4     max\_MOV=max\_MOV,
5     home\_team\_adv=home\_team\_adv,
6     win\_floor=0.0)
\end{DoxyCode}
\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!database\+\_\+ratings@{database\+\_\+ratings}}
\index{database\+\_\+ratings@{database\+\_\+ratings}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{database\+\_\+ratings}{database_ratings}}]{\setlength{\rightskip}{0pt plus 5cm}list full\+\_\+ratings\+\_\+calculations.\+database\+\_\+ratings}\hypertarget{namespacefull__ratings__calculations_a3a94f1d9d2af1e1c5501e0179768384d}{}\label{namespacefull__ratings__calculations_a3a94f1d9d2af1e1c5501e0179768384d}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [
2     \{
3         \textcolor{stringliteral}{'rating\_date'}: analysis\_end\_date.replace(
4             hour=0,
5             minute=0,
6             second=0,
7             microsecond=0),
8         \textcolor{stringliteral}{'rating'}: i[\textcolor{stringliteral}{'Adj. Rtg.'}],
9         \textcolor{stringliteral}{'team\_id'}:mlbgames\_name\_to\_id(
10             i[\textcolor{stringliteral}{'Team'}])\} \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} ratings\_list]
\end{DoxyCode}


Writing Ratings to Database \#. 

\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!file\+\_\+out@{file\+\_\+out}}
\index{file\+\_\+out@{file\+\_\+out}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{file\+\_\+out}{file_out}}]{\setlength{\rightskip}{0pt plus 5cm}full\+\_\+ratings\+\_\+calculations.\+file\+\_\+out}\hypertarget{namespacefull__ratings__calculations_ad222c702d72dea5e00727f1bcab409e5}{}\label{namespacefull__ratings__calculations_ad222c702d72dea5e00727f1bcab409e5}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = open(
2     wkdir +
3     \textcolor{stringliteral}{'Summary\_'} +
4     analysis\_end\_date.strftime(\textcolor{stringliteral}{'%Y-%m-%d'}) +
5     \textcolor{stringliteral}{'.txt'},
6     \textcolor{stringliteral}{'w'})
\end{DoxyCode}


Print to Log File \#. 

\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!games@{games}}
\index{games@{games}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{games}{games}}]{\setlength{\rightskip}{0pt plus 5cm}list full\+\_\+ratings\+\_\+calculations.\+games}\hypertarget{namespacefull__ratings__calculations_ad7fbe206580dbeabe107c6ac5b3fe020}{}\label{namespacefull__ratings__calculations_ad7fbe206580dbeabe107c6ac5b3fe020}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = Game.select().where(Game.scheduled\_date >= analysis\_start\_date,
2                             Game.scheduled\_date <= analysis\_end\_date - timedelta(days=1))
\end{DoxyCode}


D\+A\+TA S\+E\+L\+E\+C\+T\+I\+ON \#. 

\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!ratings\+\_\+table@{ratings\+\_\+table}}
\index{ratings\+\_\+table@{ratings\+\_\+table}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{ratings\+\_\+table}{ratings_table}}]{\setlength{\rightskip}{0pt plus 5cm}full\+\_\+ratings\+\_\+calculations.\+ratings\+\_\+table}\hypertarget{namespacefull__ratings__calculations_ada660b21a1fe682bdaac6a53fb2844a8}{}\label{namespacefull__ratings__calculations_ada660b21a1fe682bdaac6a53fb2844a8}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = tabulate(
2     table\_list,
3     headers=[
4         \textcolor{stringliteral}{'Team'},
5         \textcolor{stringliteral}{'Division'},
6         \textcolor{stringliteral}{'Wins'},
7         \textcolor{stringliteral}{'Losses'},
8         \textcolor{stringliteral}{'Win Pct.'},
9         \textcolor{stringliteral}{'Run Delta'},
10         \textcolor{stringliteral}{'Pythag. Wins'},
11         \textcolor{stringliteral}{'Avg. Run Delta'},
12         \textcolor{stringliteral}{'Adj. Rtg.'}],
13     tablefmt=\textcolor{stringliteral}{'rst'})
\end{DoxyCode}
\index{full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}!table\+\_\+list@{table\+\_\+list}}
\index{table\+\_\+list@{table\+\_\+list}!full\+\_\+ratings\+\_\+calculations@{full\+\_\+ratings\+\_\+calculations}}
\subsubsection[{\texorpdfstring{table\+\_\+list}{table_list}}]{\setlength{\rightskip}{0pt plus 5cm}list full\+\_\+ratings\+\_\+calculations.\+table\+\_\+list}\hypertarget{namespacefull__ratings__calculations_aea6fcad67a2966594f87438dc1f03bf7}{}\label{namespacefull__ratings__calculations_aea6fcad67a2966594f87438dc1f03bf7}
{\bfseries Initial value\+:}
\begin{DoxyCode}
1 = [
2     (i[\textcolor{stringliteral}{'Team'}],
3      i[\textcolor{stringliteral}{'Division'}],
4      i[\textcolor{stringliteral}{'Wins'}],
5      i[\textcolor{stringliteral}{'Losses'}],
6      i[\textcolor{stringliteral}{'Win Pct.'}],
7      i[\textcolor{stringliteral}{'Run Delta'}],
8      i[\textcolor{stringliteral}{'Pythag. Wins'}],
9      i[\textcolor{stringliteral}{'Avg. Run Delta'}],
10      i[\textcolor{stringliteral}{'Adj. Rtg.'}]) \textcolor{keywordflow}{for} i \textcolor{keywordflow}{in} ratings\_list]
\end{DoxyCode}


Writing the table to screen \#. 

